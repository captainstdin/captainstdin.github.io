---
title: 使用frp搭建p2p远程桌面
categories:
  - 教程
date: 2022-12-01 13:48:44
tags:
  - FRP
  - P2P
---


不通过frp转发，第一次使用frps进行桥梁搭建，后面就是p2p流量了，

nat类型一共有nat1-nat4(最差)，双方网络需要 client1+clinet2< 7 才行。对称网络+端口限制网络 已经不能打通p2p了


<!--more-->



## 0: 准备 `frp软件包` ， `net网络类型检测`

+ `frp软件包`
  https://github.com/fatedier/frp/releases
+ `网络类型检测`
  https://github.com/HMBSbige/NatTypeTester/releases


## 我是移动内网ip，但是类型是nat1，`高恪路由器`只支持nat4!!!

nat类型一共有nat1-nat4(最差)，双方网络需要 client1+clinet2< 7 才行。对称网络+端口限制网络 已经不能打通p2p了
nat类型一共有nat1-nat4(最差)，双方网络需要 client1+clinet2< 7 才行。对称网络+端口限制网络 已经不能打通p2p了
nat类型一共有nat1-nat4(最差)，双方网络需要 client1+clinet2< 7 才行。对称网络+端口限制网络 已经不能打通p2p了

![mobile-bindwith-nat1.png][1]


<!--more-->


## 1：被控端 配置




```ini
[common]
server_addr = xxxxx.com
server_port = 7000
token = ********    


[p2p_rdp_xtcp]
type = xtcp
sk = 272745
local_ip = 127.0.0.1
local_port = 3389
use_encryption = false
use_compression = false

```



## 2: 控制端，本地端口转发到 p2p远程3389

```ini
[common]
server_addr = ****.com
server_port = 7000
token = *****  



[p2p_rdp_visitor]
role = visitor
type = xtcp
server_name = p2p_rdp_xtcp
sk = 272745
bind_addr = 127.0.0.1
bind_port = 10001
use_encryption = false
use_compression = false

```

## 3. 远程连接后，关闭frps ，仍然可以没问题。

![frpc-p2p.png][2]


[1]: ./typecho/uploads/2022/12/584981504.png
[2]: ./typecho/uploads/2022/12/24496411.png