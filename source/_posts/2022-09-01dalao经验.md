---
title: dalao经验
categories:
  - 默认
date: 2022-09-01 13:31:20
tags:
  - 经验
---


## 消息队列 redis
订阅模式，点对点模式

看似木头 15:06:10
Atlas  
还有你们redis队列用的pop还是 订阅
@Atlas blpop,

看似木头 15:06:17
订阅是广播,

看似木头 15:06:27
blpop是单播

看似木头 15:06:55
额, 其实是轮播, redis自己实现的负载均衡

看似木头 15:08:23
广播可能会消耗redis大量的loop片段, 所以我们不用

2逼哥哥 15:08:32
用redis的stream做消息队列爽得一p

看似木头 15:08:56
stream也很不错

看似木头 15:09:08
就是实现略微复杂


看似木头 15:14:00
Atlas  
队列上，Redis 广播 场景是啥
@Atlas 比如多路缓存更新

看似木头 15:14:19
因为本地lo比局域网快相当多

看似木头 15:14:56
还有就是并发实在太高, 比如500k/s

看似木头 15:15:11
这时候要分好几个redis集群的.

看似木头 15:15:48
那么集群同步更新某些数据, 方式之一就是这样洛

看似木头 15:16:01
接收统一的配置命令,比如京东/淘宝上的秒杀活动


## 最佳的数组去重
有个题目. 我有100k个手机号名单, 我给你1k个手机号, 让你查出来, 哪些手机号在名单中, 哪些不在
array系列函数, 其实可以实现相当多算法. 虽然性能比起其他语言查许多. 但是光php本身, 合理利用array系列函数, 性能也能提升百倍

array_flip与isset
![QQ图片20220901160813.png][1]

![QQ图片20220901160854.png][2]


[1]: ./typecho/uploads/2022/09/502627543.png
[2]: ./typecho/uploads/2022/09/1162838148.png